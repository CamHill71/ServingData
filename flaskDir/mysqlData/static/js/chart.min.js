const ctx = document.getElementById('myChart').getContext('2d');


var lineData = {
    datasets: [{
        label: 'Holdings overall percentage',
        line: '',
        data: [],
        borderWidth: 2,
        lineTension: 0.2,
        fill: false,
        borderColor: [
            'rgba(128, 64, 65, 1)',
        ],
    }, ],
};


let lineOptions = {
    type: 'line',
    responsive: true,
    legend: {
        display: true
    },
    title: {
        display: true,
        text: "CPU LOAD"
    },
    scales: {
        xAxes: {

            display: true,
            lablestring: "Time"
        },
        yAxes: {
            display: true,
            lablestring: "Percentage",
            beginAtZero: true,
            suggestedMin: -300,
            suggestedMax: 500

        }
    }
};


const myChart = new Chart(ctx, {
    type: 'line',
    data: lineData,
    options: lineOptions
});

var recurring_sum = 0.0;
var last_sum = 0.0;
var count = 0;

for (let i = 0; i < resultList.length; i++) {
    let new_string = resultList[i].replace("(", "").replace(")", "");
    let split_string = new_string.split(",");

    // label
    myChart.data.labels.push(split_string[0]);

    // recurring data
    recurring_sum = (last_sum + parseFloat(split_string[1]));

    // data
    myChart.data.datasets[0].data.push(recurring_sum);
    myChart.update();

    last_sum = recurring_sum;

}

